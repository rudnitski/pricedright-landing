<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PricedRight ‚Äî Never underprice your jewelry again</title>
  <meta name="description" content="Upload a photo. Get expert pricing in 24 hours. Trusted by 500+ Etsy sellers. Free during beta.">
  
  <!-- Open Graph for Reddit/social -->
  <meta property="og:title" content="PricedRight - AI Jewelry Pricing Assistant" />
  <meta property="og:description" content="Stop guessing what to charge. Get data-backed pricing in 24 hours." />
  <meta property="og:type" content="website" />
  
  <style>
    :root{
      --bg:#F9F7F4; --fg:#0E0E0F; --line:#DCDCDC; --muted:#666; 
      --btn:#0E0E0F; --btnfg:#fff; --success:#22c55e; --error:#ef4444;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.5 system-ui,-apple-system,sans-serif}
    .wrap{max-width:960px;margin:0 auto;padding:20px}
    
    /* Header */
    header{position:sticky;top:0;background:rgba(249,247,244,.95);backdrop-filter:blur(8px);border-bottom:1px solid var(--line);z-index:10}
    .row{display:flex;gap:16px;align-items:center;justify-content:space-between}
    .logo{font-weight:600;font-size:18px}
    .trust{font-size:12px;color:var(--muted);margin-left:8px}
    
    /* Hero */
    .hero{display:grid;grid-template-columns:1.2fr .8fr;gap:32px;align-items:center;padding:48px 0}
    .hero h1{font-size:42px;line-height:1.1;margin:0 0 12px;font-weight:700}
    .hero .subtitle{font-size:18px;color:var(--muted);margin-bottom:24px}
    .stats{display:flex;gap:24px;margin:20px 0;padding:16px 0;border-top:1px solid var(--line);border-bottom:1px solid var(--line)}
    .stat{flex:1}
    .stat-num{font-size:24px;font-weight:700}
    .stat-label{font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:0.5px}
    
    /* Buttons */
    .btn{background:var(--btn);color:var(--btnfg);border:none;border-radius:10px;padding:14px 24px;cursor:pointer;font-size:16px;font-weight:600;transition:transform 0.2s}
    .btn:hover{transform:translateY(-2px)}
    .btn:disabled{opacity:.6;cursor:default;transform:none}
    .btn-ghost{border:2px solid var(--line);background:transparent;color:var(--fg)}
    
    /* Cards */
    .card{border:1px solid var(--line);background:#fff;border-radius:16px;padding:20px;box-shadow:0 2px 8px rgba(0,0,0,0.04)}
    .example-img{width:100%;height:260px;object-fit:cover;border-radius:12px;margin-bottom:16px}
    .price-display{font-size:28px;font-weight:700;margin:12px 0}
    .price-breakdown{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:12px}
    .breakdown-item{background:var(--bg);padding:8px 12px;border-radius:8px;font-size:13px}
    
    /* Trust signals */
    .trust-bar{background:#fff;border:1px solid var(--line);border-radius:12px;padding:16px;margin:24px 0;display:flex;gap:32px;justify-content:center;align-items:center}
    .trust-item{display:flex;align-items:center;gap:8px;font-size:14px;color:var(--muted)}
    .trust-icon{font-size:20px}
    
    /* Modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:100}
    .modal.open{display:flex}
    .backdrop{position:absolute;inset:0;background:rgba(0,0,0,0.5)}
    .sheet{position:relative;width:90%;max-width:520px;max-height:90vh;overflow-y:auto;background:#fff;border-radius:20px;padding:24px;box-shadow:0 20px 60px rgba(0,0,0,0.3)}
    
    /* Form */
    .form-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
    .form-header h2{margin:0;font-size:24px}
    .close-btn{background:none;border:none;font-size:24px;cursor:pointer;color:var(--muted)}
    
    .upload-zone{border:2px dashed var(--line);border-radius:12px;padding:32px;text-align:center;cursor:pointer;transition:all 0.2s;background:var(--bg)}
    .upload-zone:hover{border-color:var(--btn);background:#fff}
    .upload-zone.active{border-color:var(--success);background:#f0fdf4}
    .upload-icon{font-size:48px;margin-bottom:8px}
    
    .preview{display:none;align-items:center;gap:12px;padding:12px;background:var(--bg);border-radius:8px;margin-top:12px}
    .preview img{width:60px;height:60px;object-fit:cover;border-radius:6px}
    .preview-info{flex:1}
    .preview-name{font-weight:600;font-size:14px}
    .preview-size{font-size:12px;color:var(--muted)}
    
    .form-group{margin-top:20px}
    label{display:block;font-weight:600;font-size:14px;margin-bottom:6px}
    label .optional{font-weight:400;color:var(--muted);font-size:12px}
    input,select,textarea{width:100%;padding:12px;border:1px solid var(--line);border-radius:8px;font-size:15px}
    input:focus,select:focus,textarea:focus{outline:none;border-color:var(--btn);box-shadow:0 0 0 3px rgba(14,14,15,0.05)}
    
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    
    /* Success state */
    .success-box{display:none;text-align:center;padding:32px}
    .success-icon{font-size:64px;margin-bottom:16px}
    .success-title{font-size:24px;font-weight:700;margin-bottom:8px}
    .success-msg{color:var(--muted);margin-bottom:24px}
    .queue-info{background:var(--bg);padding:16px;border-radius:12px;font-size:14px}
    
    /* Mobile */
    @media (max-width:768px){
      .hero{grid-template-columns:1fr;gap:24px;padding:32px 0}
      .hero h1{font-size:32px}
      .stats{flex-direction:column;gap:12px}
      .trust-bar{flex-direction:column;gap:12px}
      .grid2{grid-template-columns:1fr}
    }
    
    /* Loading state */
    @keyframes spin{to{transform:rotate(360deg)}}
    .spinner{display:inline-block;width:20px;height:20px;border:2px solid var(--line);border-top-color:var(--btn);border-radius:50%;animation:spin 0.6s linear infinite}
  </style>

  <!-- Plausible Analytics -->
  <script defer data-domain="pricedright-landing.vercel.app" src="https://plausible.io/js/script.js"></script>
</head>
<body>
  <header>
    <div class="wrap row">
      <div>
        <span class="logo">PricedRight</span>
        <span class="trust">Beta ‚Ä¢ 523 reports sent</span>
      </div>
      <button class="btn" onclick="openModal()">Get pricing report ‚Üí</button>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <div>
        <h1>Never underprice your jewelry again</h1>
        <p class="subtitle">Upload a photo. Our experts (humans + AI) analyze materials, complexity, and market data. Get your personalized pricing report in 24 hours.</p>
        
        <div class="stats">
          <div class="stat">
            <div class="stat-num">24h</div>
            <div class="stat-label">Report delivery</div>
          </div>
          <div class="stat">
            <div class="stat-num">$0</div>
            <div class="stat-label">During beta</div>
          </div>
          <div class="stat">
            <div class="stat-num" id="spotsLeft">12</div>
            <div class="stat-label">Spots today</div>
          </div>
        </div>
        
        <div style="display:flex;gap:12px;flex-wrap:wrap">
          <button class="btn" onclick="openModal()">Get your pricing report ‚Üí</button>
          <button class="btn btn-ghost" onclick="scrollToExample()">See example ‚Üì</button>
        </div>
      </div>
      
      <div class="card">
        <img class="example-img" alt="Handmade bracelet example" 
             src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 260'%3E%3Cdefs%3E%3ClinearGradient id='g'%3E%3Cstop offset='0%25' stop-color='%23E5DEFF'/%3E%3Cstop offset='100%25' stop-color='%23FFDEE2'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill='url(%23g)' width='400' height='260'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23999' font-family='system-ui' font-size='16'%3EYour jewelry photo here%3C/text%3E%3C/svg%3E" />
        <div style="font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:0.5px">AI Analysis</div>
        <div class="price-display">$45 ‚Äì $58</div>
        <div class="price-breakdown">
          <div class="breakdown-item">üì¶ Materials: $12</div>
          <div class="breakdown-item">‚è±Ô∏è Labor: 2.5h</div>
          <div class="breakdown-item">üí∞ Margin: 68%</div>
          <div class="breakdown-item">üè™ Platform: Etsy</div>
        </div>
      </div>
    </section>

    <div class="trust-bar">
      <div class="trust-item">
        <span class="trust-icon">üîí</span>
        <span>Your designs stay private</span>
      </div>
      <div class="trust-item">
        <span class="trust-icon">‚ö°</span>
        <span>24-hour delivery</span>
      </div>
      <div class="trust-item">
        <span class="trust-icon">üë•</span>
        <span>Human + AI review</span>
      </div>
    </div>

    <section id="example" style="padding:40px 0;border-top:1px solid var(--line)">
      <h2 style="font-size:28px;margin-bottom:24px">What you'll get</h2>
      <div class="grid2">
        <div>
          <h3>üìä Detailed pricing breakdown</h3>
          <p style="color:var(--muted)">Materials cost, labor calculation, platform fees, and recommended margin based on your market.</p>
        </div>
        <div>
          <h3>üí° Positioning strategy</h3>
          <p style="color:var(--muted)">How to present your piece as budget, mid-range, or premium based on materials and craftsmanship.</p>
        </div>
        <div>
          <h3>üéØ Platform-specific tips</h3>
          <p style="color:var(--muted)">Pricing adjustments for Etsy vs. craft fairs vs. Instagram vs. your own website.</p>
        </div>
        <div>
          <h3>üìà Upsell opportunities</h3>
          <p style="color:var(--muted)">Simple changes to increase perceived value: photography, packaging, descriptions.</p>
        </div>
      </div>
    </section>
  </main>

  <!-- Upload Modal -->
  <div class="modal" id="uploadModal">
    <div class="backdrop" onclick="closeModal()"></div>
    <div class="sheet">
      <div class="form-header">
        <h2>Get your pricing report</h2>
        <button class="close-btn" onclick="closeModal()">√ó</button>
      </div>
      
      <form id="pricingForm">
        <div class="upload-zone" id="uploadZone">
          <div class="upload-icon">üì∏</div>
          <div style="font-weight:600;margin-bottom:4px">Click to upload photo</div>
          <div style="font-size:13px;color:var(--muted)">or drag and drop ‚Ä¢ JPG/PNG/WEBP/HEIC up to 25MB</div>
          <input type="file" id="fileInput" name="photo" accept="image/*" style="display:none" required>
        </div>
        
        <div class="preview" id="preview">
          <img id="previewImg" alt="Preview">
          <div class="preview-info">
            <div class="preview-name" id="fileName">filename.jpg</div>
            <div class="preview-size" id="fileSize">2.3 MB</div>
          </div>
          <button type="button" onclick="removeFile()" style="background:none;border:none;color:var(--error);cursor:pointer">Remove</button>
        </div>
        
        <div class="grid2">
          <div class="form-group">
            <label for="email">Email address</label>
            <input type="email" id="email" name="email" required placeholder="you@example.com">
          </div>
          <div class="form-group">
            <label for="platform">Where you sell</label>
            <select id="platform" name="platform" required>
              <option value="">Select platform...</option>
              <option value="etsy">Etsy</option>
              <option value="instagram">Instagram</option>
              <option value="website">Own website</option>
              <option value="craft_fair">Craft fairs</option>
              <option value="not_yet">Not selling yet</option>
            </select>
          </div>
        </div>
        
        <div class="form-group">
          <label for="materials">
            Primary materials 
            <span class="optional">(optional - helps accuracy)</span>
          </label>
          <input type="text" id="materials" name="materials" placeholder="e.g., Sterling silver, freshwater pearls">
        </div>
        
        <div class="form-group">
          <label for="time">
            Time to make 
            <span class="optional">(optional)</span>
          </label>
          <input type="text" id="time" name="time" placeholder="e.g., 2 hours, 30 minutes">
        </div>
        
        <div class="form-group">
          <label for="notes">
            Additional notes 
            <span class="optional">(optional)</span>
          </label>
          <textarea id="notes" name="notes" rows="2" placeholder="Anything else we should know?"></textarea>
        </div>
        
        <div style="margin-top:24px">
          <button type="submit" class="btn" style="width:100%" id="submitBtn">
            Get my pricing report ‚Üí
          </button>
          <p style="text-align:center;margin-top:12px;font-size:13px;color:var(--muted)">
            Free during beta ‚Ä¢ 24-hour delivery ‚Ä¢ <span id="queuePosition">You'll be #8 in queue</span>
          </p>
        </div>
      </form>
      
      <div class="success-box" id="successBox">
        <div class="success-icon">‚úÖ</div>
        <div class="success-title">Perfect! We got your piece</div>
        <p class="success-msg">Our team (humans + AI) is analyzing your jewelry. You'll receive a detailed PDF report within 24 hours.</p>
        <div class="queue-info">
          <strong>Your position:</strong> <span id="finalPosition">#8</span> in today's queue<br>
          <strong>Estimated delivery:</strong> <span id="deliveryTime">Tomorrow, 2:30 PM</span>
        </div>
        <button class="btn" onclick="closeModal()" style="margin-top:20px">Got it</button>
      </div>
    </div>
  </div>

  <footer style="padding:40px 20px;text-align:center;border-top:1px solid var(--line);color:var(--muted);font-size:14px">
    <div class="wrap">
      Questions? Email help@pricedright.ai ‚Ä¢ Made by makers, for makers
    </div>
  </footer>

  <script>
    // State
    let selectedFile = null;
    const modal = document.getElementById('uploadModal');
    const form = document.getElementById('pricingForm');
    const uploadZone = document.getElementById('uploadZone');
    const fileInput = document.getElementById('fileInput');
    const preview = document.getElementById('preview');
    const successBox = document.getElementById('successBox');
    
    // Simulated queue (stored per day)
    const today = new Date().toDateString();
    const queueKey = `pr_queue_${today}`;
    let queueData = JSON.parse(localStorage.getItem(queueKey) || '{}');
    
    if (!queueData.position) {
      queueData = {
        position: Math.floor(Math.random() * 8) + 5, // 5-12
        total: 30,
        submitted: 0
      };
      localStorage.setItem(queueKey, JSON.stringify(queueData));
    }
    
    // Update UI
    const spotsLeft = Math.max(0, queueData.total - queueData.position);
    document.getElementById('spotsLeft').textContent = spotsLeft;
    document.getElementById('queuePosition').textContent = `You'll be #${queueData.position} in queue`;
    
    // Modal functions
    function openModal() {
      modal.classList.add('open');
      track('modal_opened');
    }
    
    function closeModal() {
      modal.classList.remove('open');
      if (successBox.style.display === 'block') {
        // Reset form after success
        form.reset();
        form.style.display = 'block';
        successBox.style.display = 'none';
        preview.style.display = 'none';
        selectedFile = null;
      }
    }
    
    function scrollToExample() {
      document.getElementById('example').scrollIntoView({ behavior: 'smooth' });
    }
    
    // File handling
    uploadZone.addEventListener('click', () => fileInput.click());
    
    uploadZone.addEventListener('dragover', (e) => {
      e.preventDefault();
      uploadZone.classList.add('active');
    });
    
    uploadZone.addEventListener('dragleave', () => {
      uploadZone.classList.remove('active');
    });
    
    uploadZone.addEventListener('drop', (e) => {
      e.preventDefault();
      uploadZone.classList.remove('active');
      const files = e.dataTransfer.files;
      if (files.length > 0) handleFile(files[0]);
    });
    
    fileInput.addEventListener('change', (e) => {
      if (e.target.files.length > 0) handleFile(e.target.files[0]);
    });
    
    const MAX_FILE_SIZE = 25 * 1024 * 1024; // 25 MB
    const IMAGE_EXT_RE = /\.(png|jpe?g|gif|webp|heic|heif|bmp|tiff?)$/i;
    async function convertHeicToJpeg(file) {
      // Try createImageBitmap first
      const createBitmap = async (blob) => {
        if (window.createImageBitmap) {
          return await createImageBitmap(blob);
        }
        return await new Promise((resolve, reject) => {
          const img = new Image();
          img.onload = () => resolve(img);
          img.onerror = reject;
          img.src = URL.createObjectURL(blob);
        });
      };
      const bitmap = await createBitmap(file);
      const width = bitmap.width;
      const height = bitmap.height;
      const canvas = document.createElement('canvas');
      canvas.width = width;
      canvas.height = height;
      const ctx = canvas.getContext('2d');
      ctx.drawImage(bitmap, 0, 0, width, height);
      const jpegBlob = await new Promise((resolve, reject) => {
        canvas.toBlob((b) => (b ? resolve(b) : reject(new Error('JPEG encoding failed'))), 'image/jpeg', 0.9);
      });
      const baseName = (file.name || 'photo').replace(/\.[^/.]+$/, '');
      const jpegFile = new File([jpegBlob], baseName + '.jpg', { type: 'image/jpeg', lastModified: Date.now() });
      return jpegFile;
    }
    
    async function handleFile(file) {
      const isImage = (file.type && file.type.startsWith('image/')) || IMAGE_EXT_RE.test(file.name || '');
      if (!isImage) {
        alert('Please upload an image file');
        return;
      }
      const isHeic = /heic|heif/i.test(file.type) || /\.(heic|heif)$/i.test(file.name || '');
      try {
        let workingFile = file;
        if (isHeic) {
          try {
            workingFile = await convertHeicToJpeg(file);
          } catch (err) {
            console.warn('HEIC conversion failed, using original file', err);
          }
        }
        if (workingFile.size > MAX_FILE_SIZE) {
          alert('File size must be less than 25MB');
          return;
        }
        selectedFile = workingFile;
        // Use object URL for preview to support converted images
        const objectUrl = URL.createObjectURL(workingFile);
        document.getElementById('previewImg').src = objectUrl;
        document.getElementById('fileName').textContent = workingFile.name;
        document.getElementById('fileSize').textContent = formatFileSize(workingFile.size);
        preview.style.display = 'flex';
      } catch (e) {
        console.error('Error handling file:', e);
        alert('Could not process the image. Please try a JPG/PNG.');
      }
    }
    
    function removeFile() {
      selectedFile = null;
      fileInput.value = '';
      preview.style.display = 'none';
    }
    
    function formatFileSize(bytes) {
      if (bytes < 1024) return bytes + ' B';
      if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
      return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
    }
    
    // Form submission
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      if (!selectedFile) {
        alert('Please upload a photo of your jewelry');
        return;
      }
      
      const submitBtn = document.getElementById('submitBtn');
      submitBtn.disabled = true;
      submitBtn.innerHTML = '<span class="spinner"></span> Uploading photo...';
      
      // Collect form data
      const formData = new FormData();
      formData.append('email', document.getElementById('email').value);
      formData.append('platform', document.getElementById('platform').value);
      formData.append('materials', document.getElementById('materials').value || '');
      formData.append('time', document.getElementById('time').value || '');
      formData.append('notes', document.getElementById('notes').value || '');
      // Attach selected image directly for Formspree (paid plan)
      if (selectedFile) {
        formData.append('photo', selectedFile, selectedFile.name);
      }
      
      // Add UTM parameters
      const urlParams = new URLSearchParams(window.location.search);
      ['utm_source', 'utm_medium', 'utm_campaign', 'utm_content', 'utm_term'].forEach(param => {
        if (urlParams.get(param)) {
          formData.append(param, urlParams.get(param));
        }
      });
      
      // Add metadata
      formData.append('queue_position', queueData.position);
      formData.append('user_agent', navigator.userAgent);
      formData.append('timestamp', new Date().toISOString());
      
      try {
        // Submit to Formspree
        const response = await fetch('https://formspree.io/f/mwpqyneb', {
          method: 'POST',
          body: formData,
          headers: {
            'Accept': 'application/json'
          }
        });
        
        if (response.ok) {
          // Update queue
          queueData.submitted++;
          localStorage.setItem(queueKey, JSON.stringify(queueData));
          
          // Show success
          document.getElementById('finalPosition').textContent = `#${queueData.position}`;
          const tomorrow = new Date();
          tomorrow.setDate(tomorrow.getDate() + 1);
          tomorrow.setHours(14, 30, 0);
          document.getElementById('deliveryTime').textContent = tomorrow.toLocaleString('en-US', {
            weekday: 'long',
            hour: 'numeric',
            minute: '2-digit'
          });
          
          form.style.display = 'none';
          successBox.style.display = 'block';
          
          track('form_submitted', {
            platform: document.getElementById('platform').value,
            has_materials: !!document.getElementById('materials').value,
            has_time: !!document.getElementById('time').value
          });
        } else {
          throw new Error('Submission failed');
        }
      } catch (error) {
        console.error('Error:', error);
        alert('Sorry, something went wrong. Please try again or email us at help@pricedright.ai');
      } finally {
        submitBtn.disabled = false;
        submitBtn.innerHTML = 'Get my pricing report ‚Üí';
      }
    });
    
    // Analytics helper
    function track(event, props = {}) {
      if (window.plausible) {
        window.plausible(event, { props });
      }
    }
  </script>
</body>
</html>
